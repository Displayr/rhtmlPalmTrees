# rhtmlPalmTrees

R htmlwidget package for creating a palm tree plot

# Installation in R

## Important
This package uses a customised htmlwidget package that allows local state saving. The official htmlwidget package will not work. Download the customised package by running install_github('Displayr/htmlwidgets')

## Installation
1. `library(devtools)`
1. `install_github('Displayr/htmlwidgets')`
1. `install_github('Displayr/rhtmlPalmTrees', auth_token='????????????????????')`

An example to verify installation:
```
  data("CSDperceptions", package = "rhtmlPalmTrees")
  weights = rep(1,ncol(CSDperceptions))
  prefix = ""
  suffix = "%"
  rhtmlPalmTrees::PalmTrees(data = CSDperceptions,
                              weights = weights,
                              row.names = rownames(CSDperceptions),
                              row.heading = names(dimnames(CSDperceptions))[1],
                              col.names = colnames(CSDperceptions),
                              col.heading = names(dimnames(CSDperceptions))[2],
                              prefix = prefix,
                              suffix = suffix,
                              tooltips = TRUE,
                              colors = qColors)
```

# Local Installation to Develop/Contribute

**Prerequisites** - For help installing prerequisites see the `Prequisite Installation Help` section below

1. nodejs >= 6.0
1. python 2.7 - one of the nodejs libraries needs python during the installation process

## Installing the rhtmlPalmTrees code

1. On windows open git shell (or install it first). On OSX open terminal
    1. Tim note : Type enter when prompted for a passphrase when opening git shell
1. Change directory to the place where you put git projects
    1. Tim note : Do not use a Dropbox synced directory. There will be 1000's of files created by `npm install` and your computer will catch fire
1. type `git clone git@github.com:Displayr/rhtmlPalmTrees.git` ENTER
1. type `cd rhtmlPalmTrees` ENTER
1. type `npm install` ENTER
    1. `npm install` is noisy and will print several warnings about `UNMET` and `DEPRECATED`. Ignore these and only make note of errors. If it fails, try running it again.
1. type `gulp serve` ENTER
    1. If `gulp serve` does not work try `./node_modules/.bin/gulp serve`. To correct this and to make your nodejs life easier you should add `./node_modules/.bin` to your PATH. Consult the Internet for instructions on how to do so on your OS of choice.

If this worked, then the `gulp serve` command opened your browser and you are looking at `http://localhost:9000`. You should see a page listing a bunch of links to examples. These examples are defined in the [internal www content directory](theSrc/internal_www/content).

Note that the browser auto-reloading feature has been disabled by default. 

## Prerequisite Installation Help

### Install nodejs on OSX

1. Install brew by following instructions here : http://brew.sh/
1. Install nvm (node version manager) by running `brew install nvm`
1. Install node by running `nvm install 6.1.0` on the terminal

### Install nodejs on Windows

1. Setup nodist. https://github.com/marcelklehr/nodist and find the link to the official installer.
1. Open the command prompt. Type: `nodist v6.1.0`
1. Type `node -v` and verify the version is correct

### Python on OSX - it should come installed. If not

1. Install brew (if not done already) by following instructions here : http://brew.sh/
1. Install python by running `brew install python` on the terminal - make sure you get 2.7

### Python on Windows

1. Download version 2.7 from https://www.python.org/downloads/

# Developing and Contributing

1. The last thing you do before committing is run `gulp build` to ensure all the autogenerated files are up to date.
2. DO NOT edit things in `browser`, `inst` and `man` folders as they are auto-generated and will be recompiled from `theSrc` folder when `gulp build` or `gulp serve` is called. It is safe to edit files in `R`, `theSrc`, `examples` and `data`.